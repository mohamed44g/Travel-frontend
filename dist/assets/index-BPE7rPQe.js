import{r as o,k as f,j as r,S as u,a as t,g,T as i,F as b,d as v,b as d,c as y}from"./index-yAhHFPex.js";import{M as m}from"./MenuItem-B2Y9fBqt.js";const x={errors:{},success:!1,message:""};async function k(c,a){"use server";const s=a.get("traveler"),n=a.get("tripId");if(Number(s)==0)return f.error("Please select number of travelers"),{errors:{traveler:"Please select a traveler"},success:!1,message:"Please select number of travelers"};try{const e=await v.post("/destination/booking",{tripId:Number(n),travelers:Number(s)});return{errors:{},success:!0,message:"Booking successful"}}catch(e){return{errors:e,message:e.message,success:!1}}}function w({availableTickets:c,id:a,update:s,price:n}){const[e,h,p]=o.useActionState(k,x);return o.useEffect(()=>{e.success&&f.success(e.message),s()},[e,s]),r(b,{children:[r(u,{direction:"row",children:[t(i,{sx:{mt:1,mb:2},children:"Ticket avaliable: "}),t(i,{sx:{mt:1,ml:1,color:"primary.main"},children:c})]}),r("form",{action:h,children:[t(d,{fullWidth:!0,id:"outlined-disabled",disabled:!0,defaultValue:"trip date is : 25-2-2025",name:"date",sx:{mt:1}}),t(d,{id:"outlined-hidden",type:"hidden",name:"tripId",value:a,sx:{display:"none"}}),r(g,{fullWidth:!0,name:"traveler",displayEmpty:!0,sx:{mt:2},defaultValue:"0",children:[t(m,{value:"0",selected:!0,children:"Select number of traveler"}),Array.from({length:6}).map((I,l)=>r(m,{value:l+1,children:[l+1," Person"]},l))]}),r(u,{direction:"row",sx:{justifyContent:"space-between",alignItems:"center",m:1,mt:2},children:[t(i,{children:"Price: "}),r(i,{children:[n,"$"]})]}),t(y,{variant:"contained",color:"primary",fullWidth:!0,sx:{mt:2},type:"submit",disabled:p,children:"Book Now"})]})]})}export{w as default};
