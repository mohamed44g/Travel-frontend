import{j as a,a as e,A as w,S as h,B as c,T as i,R as I,r as x,G as k,i as u,b as S,I as C,c as j,F as R,k as p,d as B}from"./index-yAhHFPex.js";import{c as F}from"./convertTohumandate-DdAuRS0w.js";const T=({name:n,date:s,rating:o,comment:r,avatarUrl:d})=>a(c,{sx:{display:"flex",gap:5,m:{xs:0,md:2},mt:{xs:0,md:4},p:{xs:0,md:2},pt:{xs:3,md:2},pb:{xs:3,md:2}},children:[e(w,{src:d,alt:n,sx:{width:{xs:40,md:55},height:{xs:40,md:55}}}),a(h,{spacing:1,flex:1,children:[a(c,{children:[a(c,{sx:{display:"flex",alignItems:"center",gap:1},children:[e(i,{variant:"subtitle2",fontWeight:"400",children:n}),e(I,{value:o,readOnly:!0,size:"small",sx:{color:"#1fd755"}})]}),e(i,{variant:"body2",sx:{color:"text.secondary",fontWeight:"300"},children:s})]}),e(i,{variant:"body2",color:"text",sx:{lineHeight:1.6,opacity:.87},children:r})]})]});function G({id:n}){const[s,o]=x.useState(0),[r,d]=x.useState(""),{isPending:g,refetch:f,data:y}=k({url:`/destination/comment?tripId=${n}`,keyID:"comments"}),l=y;if(g)return e(u,{});const v=(t,m)=>{o(m)},b=async()=>{if(!r||!s)p.error("type your comment and rate to submit.");else try{await B.post("/destination/comment",{comment:r,rate:s,tripId:n}),d(""),o(0),f()}catch{p.error("Failed to add comment.")}};return e(R,{children:a(x.Suspense,{fallback:e(u,{}),children:[e(i,{variant:"h5",sx:{m:{xs:1,md:2}},children:"Reviews Scores and Score Breakdown"}),e(S,{id:"outlined-multiline-static",label:"Comment",fullWidth:!0,multiline:!0,variant:"outlined",sx:{width:{xs:"100%",md:"61%"},m:{xs:1,md:2},mt:{xs:5}},minRows:2,maxRows:4,value:r,onChange:t=>d(t.target.value)}),a(h,{direction:"row",sx:{alignItems:"center",justifyContent:"space-between",m:{xs:1,md:2},mb:{xs:5},width:{xs:"100%",md:"61%"}},children:[a(h,{direction:"row",sx:{alignItems:"center",mt:{xs:0,md:0}},children:[e(i,{component:"h6",sx:{mr:1},children:"Your rate:"}),e(C,{value:s,onchange:v})]}),e(j,{variant:"contained",color:"primary",sx:{mt:0,justifySelf:"end",backgroundColor:"#1fd755"},onClick:b,children:"submit"})]}),e("hr",{style:{margin:10,opacity:.2}}),e(c,{className:"destination-comments",children:l==null?void 0:l.data.map((t,m)=>e(T,{name:t.user_name,date:F(t.created_at),rating:Number(t.rate),comment:t.content,avatarUrl:"/path-to-avatar.jpg"},m))})]})})}export{G as default};
